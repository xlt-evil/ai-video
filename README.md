# NextChat Simple

ä¸€ä¸ªåŸºäº NextChat UI è®¾è®¡çš„ç®€åŒ–ç‰ˆèŠå¤©ç•Œé¢é¡¹ç›®ã€‚

## ç‰¹ç‚¹

- âœ¨ **ä¿ç•™ä¼˜ç§€ UI**ï¼šå®Œæ•´ä¿ç•™äº† NextChat çš„ç¾è§‚ç•Œé¢è®¾è®¡
- ğŸ¯ **ç®€åŒ–æ¶æ„**ï¼šç§»é™¤äº†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œä»£ç ç»“æ„æ¸…æ™°
- ğŸš€ **æ˜“äºäºŒå¼€**ï¼šä»£ç ç®€æ´ï¼Œä¾¿äºç†è§£å’Œæ‰©å±•
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- ğŸŒ— **æ·±è‰²æ¨¡å¼**ï¼šè‡ªåŠ¨é€‚é…ç³»ç»Ÿä¸»é¢˜

## æŠ€æœ¯æ ˆ

- Next.js 14 (App Router)
- TypeScript
- SCSS Modules
- React Hooks

## é¡¹ç›®ç»“æ„

```
app/
â”œâ”€â”€ components/           # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ home.tsx         # ä¸»é¡µå®¹å™¨
â”‚   â”œâ”€â”€ sidebar.tsx      # ä¾§è¾¹æ 
â”‚   â”œâ”€â”€ chat.tsx         # èŠå¤©ç•Œé¢
â”‚   â””â”€â”€ ui-lib.tsx       # UI ç»„ä»¶åº“
â”œâ”€â”€ styles/              # æ ·å¼ç›®å½•
â”‚   â”œâ”€â”€ globals.scss     # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ animation.scss   # åŠ¨ç”»æ ·å¼
â””â”€â”€ page.tsx             # å…¥å£é¡µé¢
```

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼

```bash
npm run dev
```

æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)

### ç”Ÿäº§æ„å»º

```bash
npm run build
npm start
```

## ç«å±±å¼•æ“è§†é¢‘ç”Ÿæˆé…ç½®

æœ¬é¡¹ç›®å·²é›†æˆç«å±±å¼•æ“ AI è§†é¢‘ç”ŸæˆæœåŠ¡çš„é…ç½®ç•Œé¢ã€‚æ”¯æŒæ–‡ç”Ÿè§†é¢‘å’Œå›¾ç”Ÿè§†é¢‘åŠŸèƒ½ã€‚

**âœ¨ ç‰¹æ€§ï¼š**
- âœ… å†…ç½® API ä»£ç†ï¼Œè§£å†³ CORS è·¨åŸŸé—®é¢˜
- âœ… å®æ—¶è¿›åº¦æ˜¾ç¤ºå’ŒçŠ¶æ€æ›´æ–°
- âœ… æ— é™è½®è¯¢ä»»åŠ¡çŠ¶æ€ï¼ˆä¸ä¼šè¶…æ—¶ï¼‰
- âœ… å†…åµŒè§†é¢‘æ’­æ”¾å™¨å’Œä¸‹è½½åŠŸèƒ½
- âœ… **é¦–å°¾å¸§å›¾ç”Ÿè§†é¢‘**ï¼šä¸Šä¼ é¦–å¸§+å°¾å¸§ï¼Œç”Ÿæˆæµç•…è¿‡æ¸¡åŠ¨ç”»
- âœ… **æ™ºèƒ½éªŒè¯**ï¼šå¿…é¡»ä¸Šä¼ 2å¼ å›¾ç‰‡æ‰èƒ½ç”Ÿæˆ

### å¿«é€Ÿå¼€å§‹

1. **è·å– API Key**
   - è®¿é—® [ç«å±±å¼•æ“æ§åˆ¶å°](https://console.volcengine.com/)
   - åœ¨æ§åˆ¶å°ä¸­æ‰¾åˆ°ã€ŒAPI Key ç®¡ç†ã€
   - åˆ›å»ºæ–°çš„ API Key æˆ–æŸ¥çœ‹ç°æœ‰å¯†é’¥

2. **é…ç½®æ–¹å¼é€‰æ‹©**

   **æ–¹å¼ä¸€ï¼šUI ç•Œé¢é…ç½®ï¼ˆæ¨èï¼‰**
   - å¯åŠ¨åº”ç”¨åï¼Œç‚¹å‡»å·¦ä¸‹è§’ âš™ï¸ è®¾ç½®æŒ‰é’®
   - å¡«å†™ API Key å’Œè§†é¢‘å‚æ•°
   - ç‚¹å‡»ä¿å­˜

   **æ–¹å¼äºŒï¼šç¯å¢ƒå˜é‡é…ç½®**
   ```bash
   cp .env.example .env.local
   # ç¼–è¾‘ .env.local æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„ API Key
   npm run dev
   ```

3. **å¼€å§‹åˆ›ä½œ**

   **æ–‡ç”Ÿè§†é¢‘ï¼š**
   ```
   è¾“å…¥ï¼šç”Ÿæˆä¸€ä¸ªæ—¥è½æµ·æ»©çš„è§†é¢‘
   ```

   **é¦–å°¾å¸§å›¾ç”Ÿè§†é¢‘ï¼š**
   1. ä¸Šä¼ é¦–å¸§å›¾ç‰‡
   2. ä¸Šä¼ å°¾å¸§å›¾ç‰‡ï¼ˆå¿…é¡»2å¼ ï¼‰
   3. è¾“å…¥æè¿°è¯ï¼ˆå¯é€‰ï¼‰
   4. ç‚¹å‡»å‘é€

4. **å‚è€ƒæ–‡æ¡£**
   - [åŠŸèƒ½ç‰¹æ€§è¯´æ˜](./FEATURES.md) â­
   - [å›¾ç”Ÿè§†é¢‘å®Œæ•´æ•™ç¨‹](./docs/IMAGE_TO_VIDEO_GUIDE.md)
   - [å¿«é€Ÿå¼€å§‹æŒ‡å—](./QUICKSTART.md)
   - [æ•…éšœæ’æŸ¥æŒ‡å—](./TROUBLESHOOTING.md)
   - [è§†é¢‘ç”Ÿæˆ API æ–‡æ¡£](https://www.volcengine.com/docs/82379/1520757)
   - [æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€æ–‡æ¡£](https://www.volcengine.com/docs/82379/1521309)

### é…ç½®é¡¹è¯´æ˜

| é…ç½®é¡¹ | å¿…å¡« | è¯´æ˜ |
|-------|------|------|
| API Key | âœ… | ç«å±±å¼•æ“ API å¯†é’¥ |
| æ¨¡å‹ | âŒ | doubao-seedance-1-0-pro-250528 |
| åˆ†è¾¨ç‡ | âŒ | 720p/1080p/2kï¼ˆé»˜è®¤ï¼š1080pï¼‰ |
| è§†é¢‘æ—¶é•¿ | âŒ | 1-10 ç§’ï¼ˆé»˜è®¤ï¼š5ç§’ï¼‰ |
| å®½é«˜æ¯” | âŒ | 16:9/9:16/1:1ï¼ˆé»˜è®¤ï¼š16:9ï¼‰ |
| é•œå¤´è¿åŠ¨ | âŒ | æ˜¯å¦å¯ç”¨é•œå¤´è¿åŠ¨ï¼ˆé»˜è®¤ï¼šæ˜¯ï¼‰ |
| æ°´å° | âŒ | æ˜¯å¦æ·»åŠ æ°´å°ï¼ˆé»˜è®¤ï¼š**å¦**ï¼‰ |
| è½®è¯¢é—´éš” | âŒ | æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€é—´éš”ï¼ˆé»˜è®¤ï¼š3000msï¼‰ |
| è¶…æ—¶æ—¶é—´ | âŒ | è¯·æ±‚è¶…æ—¶ï¼ˆé»˜è®¤ï¼š300000ms/5åˆ†é’Ÿï¼‰ |

## ğŸ—ï¸ æ¶æ„è¯´æ˜

### API ä»£ç†æ¶æ„

ä¸ºäº†è§£å†³æµè§ˆå™¨ç›´æ¥è°ƒç”¨ç«å±±å¼•æ“ API çš„ CORS è·¨åŸŸé—®é¢˜ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨ Next.js API Routes ä½œä¸ºä»£ç†ï¼š

```
æµè§ˆå™¨ â†’ Next.js API è·¯ç”± â†’ ç«å±±å¼•æ“ API
          (app/api/video/)
```

**API è·¯ç”±ï¼š**
- `POST /api/video/create` - åˆ›å»ºè§†é¢‘ç”Ÿæˆä»»åŠ¡
- `GET /api/video/status/[taskId]` - æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€

### ç›®å½•ç»“æ„

```
app/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ video/
â”‚       â”œâ”€â”€ create/
â”‚       â”‚   â””â”€â”€ route.ts          # åˆ›å»ºä»»åŠ¡ä»£ç†
â”‚       â””â”€â”€ status/
â”‚           â””â”€â”€ [taskId]/
â”‚               â””â”€â”€ route.ts      # æŸ¥è¯¢çŠ¶æ€ä»£ç†
â”œâ”€â”€ services/
â”‚   â””â”€â”€ video-generation.ts       # è§†é¢‘ç”ŸæˆæœåŠ¡
â”œâ”€â”€ config/
â”‚   â””â”€â”€ volcengine.ts            # é…ç½®ç®¡ç†
â””â”€â”€ components/
    â”œâ”€â”€ home.tsx                 # ä¸»é€»è¾‘
    â”œâ”€â”€ chat.tsx                 # èŠå¤©ç•Œé¢
    â””â”€â”€ settings.tsx             # è®¾ç½®ç•Œé¢
```

## äºŒæ¬¡å¼€å‘æŒ‡å—

### æ·»åŠ  AI API é›†æˆ

åœ¨ `app/components/home.tsx` çš„ `handleSendMessage` å‡½æ•°ä¸­ï¼Œå°†æ¨¡æ‹Ÿå›å¤æ›¿æ¢ä¸ºçœŸå®çš„ API è°ƒç”¨ï¼š

```typescript
const handleSendMessage = async (content: string) => {
  // æ·»åŠ ä½ çš„ AI API è°ƒç”¨
  const response = await fetch('/api/chat', {
    method: 'POST',
    body: JSON.stringify({ message: content })
  });
  const data = await response.json();
  // å¤„ç†å“åº”...
};
```

### é›†æˆç«å±±å¼•æ“è§†é¢‘ç”Ÿæˆ

```typescript
import { createVideoTask, waitForTask } from '@/app/services/video-generation';

// ä» localStorage è¯»å–é…ç½®
const config = JSON.parse(localStorage.getItem('ark_config') || '{}');

// åˆ›å»ºè§†é¢‘ç”Ÿæˆä»»åŠ¡
const task = await createVideoTask(
  config,
  'æ— äººæœºä»¥æå¿«é€Ÿåº¦ç©¿è¶Šå¤æ‚éšœç¢æˆ–è‡ªç„¶å¥‡è§‚ï¼Œå¸¦æ¥æ²‰æµ¸å¼é£è¡Œä½“éªŒ',
  'https://example.com/image.png' // å¯é€‰ï¼šå›¾ç‰‡ URL
);

console.log('ä»»åŠ¡ID:', task.id);

// ç­‰å¾…ä»»åŠ¡å®Œæˆ
const result = await waitForTask(config, task.id, (task) => {
  console.log('ä»»åŠ¡çŠ¶æ€:', task.status);
});

if (result.status === 'succeeded') {
  console.log('è§†é¢‘URL:', result.content.video_url);
}
```

### API ç¤ºä¾‹

**åˆ›å»ºä»»åŠ¡ï¼š**
```bash
curl -X POST https://ark.cn-beijing.volces.com/api/v3/contents/generations/tasks \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $ARK_API_KEY" \
  -d '{
    "model": "doubao-seedance-1-0-pro-250528",
    "content": [{
      "type": "text",
      "text": "æè¿°æ–‡æœ¬ --resolution 1080p --duration 5"
    }]
  }'
```

**æŸ¥è¯¢ä»»åŠ¡ï¼š**
```bash
curl -X GET https://ark.cn-beijing.volces.com/api/v3/contents/generations/tasks/{id} \
  -H "Authorization: Bearer $ARK_API_KEY"
```

### è‡ªå®šä¹‰æ ·å¼

æ‰€æœ‰æ ·å¼å˜é‡éƒ½å®šä¹‰åœ¨ `app/styles/globals.scss` ä¸­ï¼Œä½ å¯ä»¥è½»æ¾ä¿®æ”¹ï¼š

```scss
:root {
  --primary: rgb(29, 147, 171);  // ä¸»é¢˜è‰²
  --sidebar-width: 300px;         // ä¾§è¾¹æ å®½åº¦
  // ... æ›´å¤šå˜é‡
}
```

### æ·»åŠ æ–°ç»„ä»¶

åœ¨ `app/components/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ç»„ä»¶æ–‡ä»¶ï¼Œéµå¾ªç°æœ‰çš„æ¨¡å—åŒ–ç»“æ„ã€‚

## ä¸åŸç‰ˆ NextChat çš„åŒºåˆ«

- âŒ ç§»é™¤äº†å¤æ‚çš„çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰
- âŒ ç§»é™¤äº†å¤šå¹³å° API é›†æˆ
- âŒ ç§»é™¤äº†æ’ä»¶ç³»ç»Ÿ
- âŒ ç§»é™¤äº†è´¦å·è®¤è¯
- âœ… ä¿ç•™äº†æ ¸å¿ƒ UI ç»„ä»¶
- âœ… ä¿ç•™äº†å“åº”å¼å¸ƒå±€
- âœ… ä¿ç•™äº†ä¸»é¢˜ç³»ç»Ÿ

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚

## è‡´è°¢

UI è®¾è®¡æ¥è‡ª [NextChat](https://github.com/ChatGPTNextWeb/NextChat)
